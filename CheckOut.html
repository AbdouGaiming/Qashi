<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="Style/CheckOutStyle.css">
  <script defer src="Script/CheckOut.js"></script>
  <div class="top-border">
    <a id="Logo" href="index.html"><img class="img" src="ICONS/Qashi.png"></a>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
  <div class="row">
    <div class="col-75">
      <div class="container">
        <form id="FormCheckOut" action="/action_page.php">

          <div class="row">
            <div class="col-50">
              <h3>Billing Address</h3>
              <label for="fname"><i class="fa fa-user"></i> Full Name</label>
              <input type="text" id="fname" required name="firstname" placeholder="Fullname">
              <label id="I-fullname">Please enter a valide name</label>
              <label for="email"><i class="fa fa-envelope"></i> Phone</label>
              <input type="text" required id="phone" name="phone">
              <label id="I-phone">Please enter a valide phone number</label>
              <label for="adr"><i class="fa fa-address-card-o"></i> Address</label>
              <input type="text" required id="adr" name="address">
              <label id="I-address">Please enter a valide address</label>

              <label for="wilaya">Wilaya</label>
              <select id="wilaya" required name="wilaya">
                <option disabled selected value> -- select an option -- </option>
                <option value="Adrar">Adrar</option>
                <option value="Aïn Defla">Aïn Defla</option>
                <option value="Aïn Témouchent">Aïn Témouchent</option>
                <option value="Algiers">Algiers</option>
                <option value="Annaba">Annaba</option>
                <option value="Batna">Batna</option>
                <option value="Béchar">Béchar</option>
                <option value="Béjaïa">Béjaïa</option>
                <option value="Biskra">Biskra</option>
                <option value="Blida">Blida</option>
                <option value="Bordj Bou Arréridj">Bordj Bou Arréridj</option>
                <option value="Bouira">Bouira</option>
                <option value="Boumerdès">Boumerdès</option>
                <option value="Chlef">Chlef</option>
                <option value="Constantine">Constantine</option>
                <option value="Djelfa">Djelfa</option>
                <option value="El Bayadh">El Bayadh</option>
                <option value="El Oued">El Oued</option>
                <option value="El Tarf">El Tarf</option>
                <option value="Ghardaïa">Ghardaïa</option>
                <option value="Guelma">Guelma</option>
                <option value="Illizi">Illizi</option>
                <option value="Jijel">Jijel</option>
                <option value="Khenchela">Khenchela</option>
                <option value="Laghouat">Laghouat</option>
                <option value="Mascara">Mascara</option>
                <option value="Médéa">Médéa</option>
                <option value="Mila">Mila</option>
                <option value="Mostaganem">Mostaganem</option>
                <option value="M'Sila">M'Sila</option>
                <option value="Naâma">Naâma</option>
                <option value="Oran">Oran</option>
                <option value="Ouargla">Ouargla</option>
                <option value="Oum El Bouaghi">Oum El Bouaghi</option>
                <option value="Relizane">Relizane</option>
                <option value="Saïda">Saïda</option>
                <option value="Sétif">Sétif</option>
                <option value="Sidi Bel Abbès">Sidi Bel Abbès</option>
                <option value="Skikda">Skikda</option>
                <option value="Souk Ahras">Souk Ahras</option>
                <option value="Tamanghasset">Tamanghasset</option>
                <option value="Tébessa">Tébessa</option>
                <option value="Tiaret">Tiaret</option>
                <option value="Tindouf">Tindouf</option>
                <option value="Tipaza">Tipaza</option>
                <option value="Tissemsilt">Tissemsilt</option>
                <option value="Tizi Ouzou">Tizi Ouzou</option>
                <option value="Tlemcen">Tlemcen</option>
              </select>
              <label id="I-wilaya">Please select a wilaya</label>

              <div class="row">
                <div class="col-50">
                  <label for="state">Ville</label>
                  <input type="text" id="ville" required name="state" placeholder="Algiers">
                  <label id="I-ville">Please enter a valide city</label>
                </div>
                <div class="col-50">
                  <label for="zip">Zip</label>
                  <input type="text" id="zip" required name="zip" placeholder="16 000">
                  <label id="I-zip">Please enter a valide zip code</label>
                </div>
              </div>
            </div>

          </div>

          <input type="submit" id="Submit" value="Continue to checkout" class="btn">
        </form>
      </div>
    </div>
    <div class="col-25">
      <div class="container">
        <h4>Cart <span class="price" style="color:black"><i class="fa fa-shopping-cart"></i> <b>2</b></span></h4>
        <script>
          document.addEventListener('DOMContentLoaded', function() {
            fetchCartItems();
          });

          function fetchCartItems() {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', 'fetch_cart_items.php', true);

            xhr.onload = function() {
              if (xhr.status === 200 && xhr.readyState === 4) {
                const data = JSON.parse(xhr.responseText);
                const cartContainer = document.querySelector('.col-25 .container');
                let cartHTML = '<h4>Cart <span class="price" style="color:black"><i class="fa fa-shopping-cart"></i> <b>' + data.length + '</b></span></h4>';
                
                let total = 0;
                data.forEach(item => {
                  cartHTML += `<p>${item.name} <span class="price">$${item.price}</span></p>`;
                  total += parseFloat(item.price);
                  total = Math.round(total * 100) / 100; 
                });

        
                cartHTML += `<hr><p>Total <span class="price" style="color:black"><b>$${total}</b></span></p>`;

                cartContainer.innerHTML = cartHTML;
              } else {
                console.error('Error fetching cart items.');
              }
            };

            xhr.send();
          }
        </script>
      </div>
    </div>
  </div>
</body>

</html>